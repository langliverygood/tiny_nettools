#ifndef _LSHELL_H_
#define _LSHELL_H_

#define DEFAUL 0             /* 默认值 */
#define RUN_AT_MAIN_THREAD 0 /* 在主线程中执行命令 */
#define RUN_AT_NEW_THREAD  1 /* 在新线程中执行命令 */
#define JOINED   0           /* 线程的链接态 */
#define DETACHED 1           /* 线程的分离态 */
#define CANSEL_ENABLE    0   /* 线程可被取消 */   
#define CANSEL_DISENABLE 1   /* 线程不可被取消 */
#define CANSEL_EXIT_WAIT 0   /* 线程的在下个取消点被取消 */
#define CANSEL_EXIT_NOW  1   /* 线程立刻被取消 */


/****************************************************************/
/* 函  数：lshell_init ******************************************/
/* 说  明：lshell初始化 *****************************************/
/* 参  数：无 ***************************************************/
/* 返回值：无 ***************************************************/
/****************************************************************/
void lshell_init();

/***********************************************************************************************************/
/* 函  数：lshell_register *********************************************************************************/
/* 说  明：注册命令 ****************************************************************************************/
/* 参  数：parent 父命令id，若无父命令，则为-1 *************************************************************/
/*      ：cmd 待注册的命令 *********************************************************************************/
/*      ：tip 待注册命令的提示 *****************************************************************************/
/*      ：func 函数指针 ************************************************************************************/
/*      ：mode 命令执行方式，在主线程中0/在主线程中非0 *****************************************************/
/*      ：join_detach 当mode!=0时有效,0：joined 1：detached ************************************************/
/*      ：cancelstate 当mode!=0时有效, 0表示收到信号后设为CANCLED状态,非0忽略CANCEL信号继续运行 ************/
/*      ：canceltype 当mode!=0时有效, 0表示收到信号后继续运行至下一个取消点再退出,1立即执行取消动作(退出) ***/
/* 返回值：成功 该命令在结构体数组中的下标 *****************************************************************/
/*      ：失败 -1 ******************************************************************************************/
/***********************************************************************************************************/
int lshell_register(int parent, const char *cmd, const char *tip, void (* func)(int argc, char **argv), 
                                                  int mode, int join_detach, int cancelstate, int canceltype);

/*****************************************************************/
/* 函  数：lshell_set_promt **************************************/
/* 说  明：注册命令 **********************************************/
/* 参  数：pmt 提示符 ********************************************/
/* 返回值：无 ****************************************************/
/*****************************************************************/
void lshell_set_promt(const char *pmt);

/******************************************************************/
/* 函  数：lshell_set_errmsg_swtich *******************************/
/* 说  明：设置错误提示开关 ***************************************/
/* 参  数：flag 0  关闭错误提示 ***********************************/
/*             1  打开错误提示 ************************************/
/* 返回值：无 *****************************************************/
/******************************************************************/
void lshell_set_errmsg_swtich(int flag);

/*****************************************************************/
/* 函  数：lshell_start ******************************************/
/* 说  明：lshell启动 ********************************************/
/* 参  数：无 ****************************************************/
/* 返回值：无 ****************************************************/
/*****************************************************************/
void lshell_start();

#endif
